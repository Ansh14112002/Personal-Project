<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Stock Market Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .progress-bar {
      transition: width 0.5s ease-in-out;
    }
    .question-card {
      transition: all 0.3s ease;
    }
    .question-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    .option-item {
      transition: all 0.2s ease;
    }
    .option-item:hover {
      background-color: #f3f4f6;
    }
    .correct-answer {
      background-color: #d1fae5;
      border-color: #10b981;
    }
    .incorrect-answer {
      background-color: #fee2e2;
      border-color: #ef4444;
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <div class="max-w-4xl mx-auto p-6">
    <!-- Quiz Header -->
    <header class="text-center mb-8">
      <h1 class="text-4xl font-bold text-purple-700 mb-2">ðŸ“Š Stock Market Mastery Quiz</h1>
      <p class="text-gray-600">Test your knowledge and track your learning progress</p>
      <div class="mt-4 flex items-center justify-center space-x-4">
        <div class="w-full bg-gray-200 rounded-full h-4">
          <div id="progress-bar" class="progress-bar bg-purple-600 h-4 rounded-full" style="width: 0%"></div>
        </div>
        <span id="progress-text" class="text-sm font-medium text-gray-700">0/10</span>
      </div>
    </header>

    <!-- Quiz Container -->
    <div id="quiz-container" class="space-y-6">
      <!-- Question 1 -->
      <div class="question-card bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex justify-between items-start mb-4">
          <h2 class="text-xl font-semibold text-gray-800">1. What is a dividend?</h2>
          <span class="text-xs bg-purple-100 text-purple-800 py-1 px-2 rounded-full">Basic Concepts</span>
        </div>
        <div class="space-y-3">
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q1" value="A" class="mr-3 h-5 w-5 text-purple-600">
            <span>A fee charged when buying stocks through a broker</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q1" value="B" class="mr-3 h-5 w-5 text-purple-600">
            <span>A portion of a company's profits distributed to shareholders</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q1" value="C" class="mr-3 h-5 w-5 text-purple-600">
            <span>A tax imposed by the government on investment gains</span>
          </label>
        </div>
        <div id="feedback-q1" class="mt-4 hidden p-3 rounded-lg">
          <p class="font-medium"></p>
          <p class="text-sm mt-1"></p>
        </div>
      </div>

      <!-- Question 2 -->
      <div class="question-card bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex justify-between items-start mb-4">
          <h2 class="text-xl font-semibold text-gray-800">2. What does ETF stand for?</h2>
          <span class="text-xs bg-blue-100 text-blue-800 py-1 px-2 rounded-full">Investment Vehicles</span>
        </div>
        <div class="space-y-3">
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q2" value="A" class="mr-3 h-5 w-5 text-blue-600">
            <span>Easy Transfer Fund</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q2" value="B" class="mr-3 h-5 w-5 text-blue-600">
            <span>Exchange Traded Fund</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q2" value="C" class="mr-3 h-5 w-5 text-blue-600">
            <span>Equity Trust Foundation</span>
          </label>
        </div>
        <div id="feedback-q2" class="mt-4 hidden p-3 rounded-lg">
          <p class="font-medium"></p>
          <p class="text-sm mt-1"></p>
        </div>
      </div>

      <!-- Question 3 (Multiple Select) -->
      <div class="question-card bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex justify-between items-start mb-4">
          <h2 class="text-xl font-semibold text-gray-800">3. Which of the following are types of stock orders? (Select all that apply)</h2>
          <span class="text-xs bg-green-100 text-green-800 py-1 px-2 rounded-full">Trading</span>
        </div>
        <div class="space-y-3">
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="checkbox" name="q3" value="A" class="mr-3 h-5 w-5 text-green-600">
            <span>Market Order</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="checkbox" name="q3" value="B" class="mr-3 h-5 w-5 text-green-600">
            <span>Limit Order</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="checkbox" name="q3" value="C" class="mr-3 h-5 w-5 text-green-600">
            <span>Stop Order</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="checkbox" name="q3" value="D" class="mr-3 h-5 w-5 text-green-600">
            <span>Dividend Order</span>
          </label>
        </div>
        <div id="feedback-q3" class="mt-4 hidden p-3 rounded-lg">
          <p class="font-medium"></p>
          <p class="text-sm mt-1"></p>
        </div>
      </div>

      <!-- Question 4 (Image-based) -->
      <div class="question-card bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex justify-between items-start mb-4">
          <h2 class="text-xl font-semibold text-gray-800">4. Which chart pattern is shown below?</h2>
          <span class="text-xs bg-yellow-100 text-yellow-800 py-1 px-2 rounded-full">Technical Analysis</span>
        </div>
        <div class="mb-4 p-2 border border-gray-200 rounded-lg">
          <img src="https://www.investopedia.com/thmb/8U3wKJ0YQeQqQm5j1JZ8Q9X9Q9Y=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/headandshoulders-5bfc8e2fc9e77c0051e7d6e8" alt="Chart Pattern" class="w-full h-auto rounded">
        </div>
        <div class="space-y-3">
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q4" value="A" class="mr-3 h-5 w-5 text-yellow-600">
            <span>Head and Shoulders</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q4" value="B" class="mr-3 h-5 w-5 text-yellow-600">
            <span>Cup and Handle</span>
          </label>
          <label class="option-item flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer">
            <input type="radio" name="q4" value="C" class="mr-3 h-5 w-5 text-yellow-600">
            <span>Double Bottom</span>
          </label>
        </div>
        <div id="feedback-q4" class="mt-4 hidden p-3 rounded-lg">
          <p class="font-medium"></p>
          <p class="text-sm mt-1"></p>
        </div>
      </div>

      <!-- Question 5 (Fill in the blank) -->
      <div class="question-card bg-white p-6 rounded-lg shadow-md border border-gray-200">
        <div class="flex justify-between items-start mb-4">
          <h2 class="text-xl font-semibold text-gray-800">5. Complete the sentence: The P/E ratio stands for ______ ratio.</h2>
          <span class="text-xs bg-red-100 text-red-800 py-1 px-2 rounded-full">Fundamental Analysis</span>
        </div>
        <div class="flex items-center">
          <input type="text" id="q5" name="q5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="Type your answer here...">
        </div>
        <div id="feedback-q5" class="mt-4 hidden p-3 rounded-lg">
          <p class="font-medium"></p>
          <p class="text-sm mt-1"></p>
        </div>
      </div>

      <!-- More questions would follow the same pattern -->

      <!-- Quiz Controls -->
      <div class="flex justify-between mt-8">
        <button id="prev-btn" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300 disabled:opacity-50" disabled>Previous</button>
        <button id="next-btn" class="bg-purple-600 text-white py-2 px-6 rounded-lg hover:bg-purple-700">Next Question</button>
        <button id="submit-btn" class="hidden bg-green-600 text-white py-2 px-6 rounded-lg hover:bg-green-700">Submit Quiz</button>
      </div>
    </div>

    <!-- Results Section (Hidden Initially) -->
    <div id="results-section" class="hidden bg-white p-8 rounded-lg shadow-lg text-center">
      <h2 class="text-3xl font-bold text-purple-700 mb-4">Quiz Results</h2>
      <div class="flex justify-center mb-8">
        <div class="w-64 h-64">
          <canvas id="results-chart"></canvas>
        </div>
      </div>
      <p id="score-text" class="text-2xl font-semibold mb-4"></p>
      <p id="result-message" class="text-gray-600 mb-6"></p>
      <div id="detailed-feedback" class="text-left space-y-4 mb-6"></div>
      <div class="flex justify-center space-x-4">
        <button id="retake-btn" class="bg-purple-600 text-white py-2 px-6 rounded-lg hover:bg-purple-700">Retake Quiz</button>
        <button id="home-btn" class="bg-gray-200 text-gray-800 py-2 px-6 rounded-lg hover:bg-gray-300">Back to Home</button>
      </div>
    </div>
  </div>

  <script>
    // Quiz Data
    const quizData = [
      {
        id: 1,
        question: "1. What is a dividend?",
        options: {
          A: "A fee charged when buying stocks through a broker",
          B: "A portion of a company's profits distributed to shareholders",
          C: "A tax imposed by the government on investment gains"
        },
        correctAnswer: "B",
        category: "Basic Concepts",
        explanation: "Dividends are payments made by a corporation to its shareholder members, usually as a distribution of profits."
      },
      {
        id: 2,
        question: "2. What does ETF stand for?",
        options: {
          A: "Easy Transfer Fund",
          B: "Exchange Traded Fund",
          C: "Equity Trust Foundation"
        },
        correctAnswer: "B",
        category: "Investment Vehicles",
        explanation: "ETFs are investment funds traded on stock exchanges, similar to individual stocks."
      },
      {
        id: 3,
        question: "3. Which of the following are types of stock orders? (Select all that apply)",
        options: {
          A: "Market Order",
          B: "Limit Order",
          C: "Stop Order",
          D: "Dividend Order"
        },
        correctAnswers: ["A", "B", "C"],
        category: "Trading",
        explanation: "Market, limit, and stop orders are common order types. There is no 'dividend order' type."
      },
      {
        id: 4,
        question: "4. Which chart pattern is shown below?",
        options: {
          A: "Head and Shoulders",
          B: "Cup and Handle",
          C: "Double Bottom"
        },
        correctAnswer: "A",
        category: "Technical Analysis",
        explanation: "The head and shoulders pattern is a bearish reversal pattern that signals a potential trend change."
      },
      {
        id: 5,
        question: "5. Complete the sentence: The P/E ratio stands for ______ ratio.",
        correctAnswer: "price to earnings",
        category: "Fundamental Analysis",
        explanation: "The P/E ratio compares a company's stock price to its earnings per share, helping investors assess valuation."
      }
      // Additional questions would be added here
    ];

    // Quiz State
    let currentQuestion = 0;
    let userAnswers = {};
    let score = 0;
    const totalQuestions = quizData.length;

    // DOM Elements
    const quizContainer = document.getElementById('quiz-container');
    const resultsSection = document.getElementById('results-section');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');
    const submitBtn = document.getElementById('submit-btn');
    const retakeBtn = document.getElementById('retake-btn');
    const homeBtn = document.getElementById('home-btn');
    const scoreText = document.getElementById('score-text');
    const resultMessage = document.getElementById('result-message');
    const detailedFeedback = document.getElementById('detailed-feedback');

    // Initialize Quiz
    function initQuiz() {
      updateProgress();
      showQuestion(currentQuestion);
      
      // Hide all feedback initially
      quizData.forEach((question, index) => {
        const feedbackEl = document.getElementById(`feedback-q${index + 1}`);
        if (feedbackEl) feedbackEl.classList.add('hidden');
      });
    }

    // Show Question
    function showQuestion(index) {
      // Hide all questions
      document.querySelectorAll('.question-card').forEach(card => {
        card.classList.add('hidden');
      });
      
      // Show current question
      document.querySelectorAll('.question-card')[index].classList.remove('hidden');
      
      // Update navigation buttons
      prevBtn.disabled = index === 0;
      nextBtn.classList.toggle('hidden', index === totalQuestions - 1);
      submitBtn.classList.toggle('hidden', index !== totalQuestions - 1);
    }

    // Update Progress
    function updateProgress() {
      const progress = ((currentQuestion + 1) / totalQuestions) * 100;
      progressBar.style.width = `${progress}%`;
      progressText.textContent = `${currentQuestion + 1}/${totalQuestions}`;
    }

    // Check Answer
    function checkAnswer(questionIndex) {
      const question = quizData[questionIndex];
      const feedbackEl = document.getElementById(`feedback-q${questionIndex + 1}`);
      
      if (!feedbackEl) return;

      let isCorrect = false;
      let userAnswer = userAnswers[questionIndex + 1];

      if (question.correctAnswers) {
        // Multiple correct answers (checkbox question)
        isCorrect = arraysEqual(userAnswer || [], question.correctAnswers);
      } else if (question.correctAnswer) {
        // Single correct answer (radio or text input)
        if (typeof userAnswer === 'string') {
          userAnswer = userAnswer.toLowerCase().trim();
          const correctAnswer = question.correctAnswer.toLowerCase().trim();
          isCorrect = userAnswer === correctAnswer;
        } else {
          isCorrect = userAnswer === question.correctAnswer;
        }
      }

      // Update feedback
      feedbackEl.classList.remove('hidden');
      feedbackEl.classList.remove('correct-answer', 'incorrect-answer');
      feedbackEl.classList.add(isCorrect ? 'correct-answer' : 'incorrect-answer');
      
      const feedbackTitle = feedbackEl.querySelector('p:first-child');
      const feedbackText = feedbackEl.querySelector('p:last-child');
      
      feedbackTitle.textContent = isCorrect ? 'âœ… Correct!' : 'âŒ Incorrect';
      feedbackText.textContent = question.explanation;

      return isCorrect;
    }

    // Helper function to compare arrays
    function arraysEqual(arr1, arr2) {
      if (!arr1 || !arr2) return false;
      if (arr1.length !== arr2.length) return false;
      
      const sortedArr1 = [...arr1].sort();
      const sortedArr2 = [...arr2].sort();
      
      return sortedArr1.every((val, index) => val === sortedArr2[index]);
    }

    // Show Results
    function showResults() {
      // Calculate score
      score = 0;
      quizData.forEach((question, index) => {
        if (checkAnswer(index)) {
          score++;
        }
      });

      // Update UI
      quizContainer.classList.add('hidden');
      resultsSection.classList.remove('hidden');
      resultsSection.classList.add('fade-in');
      
      scoreText.textContent = `You scored ${score} out of ${totalQuestions}`;
      
      const percentage = (score / totalQuestions) * 100;
      if (percentage >= 80) {
        resultMessage.textContent = "Excellent work! You have a strong understanding of stock market concepts.";
      } else if (percentage >= 60) {
        resultMessage.textContent = "Good job! You have a decent understanding but could review some concepts.";
      } else {
        resultMessage.textContent = "Keep learning! Review the material and try again to improve your score.";
      }

      // Create chart
      createResultsChart(percentage);
      
      // Show detailed feedback
      showDetailedFeedback();
    }

    // Create Results Chart
    function createResultsChart(percentage) {
      const ctx = document.getElementById('results-chart').getContext('2d');
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Correct', 'Incorrect'],
          datasets: [{
            data: [percentage, 100 - percentage],
            backgroundColor: ['#8b5cf6', '#e2e8f0'],
            borderWidth: 0
          }]
        },
        options: {
          cutout: '70%',
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              enabled: false
            }
          },
          animation: {
            animateScale: true,
            animateRotate: true
          }
        }
      });
    }

    // Show Detailed Feedback
    function showDetailedFeedback() {
      detailedFeedback.innerHTML = '';
      
      quizData.forEach((question, index) => {
        const questionEl = document.createElement('div');
        questionEl.className = 'p-4 border border-gray-200 rounded-lg';
        
        const questionTitle = document.createElement('h3');
        questionTitle.className = 'font-semibold text-lg mb-2';
        questionTitle.textContent = question.question;
        
        const userAnswer = userAnswers[index + 1];
        let answerText = '';
        
        if (Array.isArray(userAnswer)) {
          answerText = userAnswer.map(opt => question.options[opt]).join(', ') || 'No answer';
        } else if (typeof userAnswer === 'string') {
          answerText = question.options ? question.options[userAnswer] || userAnswer : userAnswer;
        } else {
          answerText = 'No answer';
        }
        
        const userAnswerEl = document.createElement('p');
        userAnswerEl.className = 'text-sm mb-1';
        userAnswerEl.innerHTML = `<span class="font-medium">Your answer:</span> ${answerText}`;
        
        const correctAnswerEl = document.createElement('p');
        correctAnswerEl.className = 'text-sm';
        
        if (question.correctAnswers) {
          correctAnswerEl.innerHTML = `<span class="font-medium">Correct answer:</span> ${question.correctAnswers.map(opt => question.options[opt]).join(', ')}`;
        } else {
          const correctAnswer = question.options ? question.options[question.correctAnswer] : question.correctAnswer;
          correctAnswerEl.innerHTML = `<span class="font-medium">Correct answer:</span> ${correctAnswer}`;
        }
        
        questionEl.appendChild(questionTitle);
        questionEl.appendChild(userAnswerEl);
        questionEl.appendChild(correctAnswerEl);
        
        detailedFeedback.appendChild(questionEl);
      });
    }

    // Event Listeners
    nextBtn.addEventListener('click', () => {
      if (currentQuestion < totalQuestions - 1) {
        currentQuestion++;
        showQuestion(currentQuestion);
        updateProgress();
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentQuestion > 0) {
        currentQuestion--;
        showQuestion(currentQuestion);
        updateProgress();
      }
    });

    submitBtn.addEventListener('click', (e) => {
      e.preventDefault();
      showResults();
    });

    retakeBtn.addEventListener('click', () => {
      // Reset quiz
      currentQuestion = 0;
      userAnswers = {};
      score = 0;
      
      // Clear all selections
      document.querySelectorAll('input[type="radio"], input[type="checkbox"], input[type="text"]').forEach(input => {
        if (input.type === 'radio' || input.type === 'checkbox') {
          input.checked = false;
        } else {
          input.value = '';
        }
      });
      
      // Hide all feedback
      document.querySelectorAll('[id^="feedback-q"]').forEach(el => {
        el.classList.add('hidden');
      });
      
      // Show quiz and hide results
      quizContainer.classList.remove('hidden');
      resultsSection.classList.add('hidden');
      
      // Reset progress
      updateProgress();
      showQuestion(currentQuestion);
    });

    homeBtn.addEventListener('click', () => {
      // In a real app, this would navigate to the home page
      alert('Returning to home page...');
    });

    // Track user answers
    document.addEventListener('change', (e) => {
      const input = e.target;
      if (input.name && input.name.startsWith('q')) {
        const questionNum = parseInt(input.name.substring(1));
        
        if (input.type === 'checkbox') {
          // Handle checkbox questions (multiple answers)
          if (!userAnswers[questionNum]) {
            userAnswers[questionNum] = [];
          }
          
          if (input.checked) {
            userAnswers[questionNum].push(input.value);
          } else {
            userAnswers[questionNum] = userAnswers[questionNum].filter(val => val !== input.value);
          }
        } else if (input.type === 'radio') {
          // Handle radio questions (single answer)
          if (input.checked) {
            userAnswers[questionNum] = input.value;
          }
        } else if (input.type === 'text') {
          // Handle text input questions
          userAnswers[questionNum] = input.value;
        }
      }
    });

    // Initialize the quiz
    initQuiz();
  </script>
</body>
</html>